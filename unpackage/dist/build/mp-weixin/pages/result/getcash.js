(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/result/getcash"],{1020:function(e,t,a){"use strict";(function(e){a("519c");n(a("66fd"));var t=n(a("a123"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,a("543d")["createPage"])},"1b75":function(e,t,a){"use strict";var n=a("270a"),o=a.n(n);o.a},"270a":function(e,t,a){},8090:function(e,t,a){"use strict";a.r(t);var n=a("f40c"),o=a.n(n);for(var i in n)"default"!==i&&function(e){a.d(t,e,(function(){return n[e]}))}(i);t["default"]=o.a},9035:function(e,t,a){"use strict";var n,o=function(){var e=this,t=e.$createElement;e._self._c},i=[];a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return n}))},a123:function(e,t,a){"use strict";a.r(t);var n=a("9035"),o=a("8090");for(var i in o)"default"!==i&&function(e){a.d(t,e,(function(){return o[e]}))}(i);a("1b75");var r,s=a("f0c5"),l=Object(s["a"])(o["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],r);t["default"]=l.exports},f40c:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a("4795")),o=i(a("6d17"));function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a,n,o,i,r){try{var s=e[i](r),l=s.value}catch(d){return void a(d)}s.done?t(l):Promise.resolve(l).then(n,o)}function s(e){return function(){var t=this,a=arguments;return new Promise((function(n,o){var i=e.apply(t,a);function s(e){r(i,n,o,s,l,"next",e)}function l(e){r(i,n,o,s,l,"throw",e)}s(void 0)}))}}function l(e,t){return h(e)||u(e,t)||c(e,t)||d()}function d(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){if(e){if("string"===typeof e)return p(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function u(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var a=[],n=!0,o=!1,i=void 0;try{for(var r,s=e[Symbol.iterator]();!(n=(r=s.next()).done);n=!0)if(a.push(r.value),t&&a.length===t)break}catch(l){o=!0,i=l}finally{try{n||null==s["return"]||s["return"]()}finally{if(o)throw i}}return a}}function h(e){if(Array.isArray(e))return e}var g=function(){a.e("components/ladder").then(function(){return resolve(a("78ed"))}.bind(null,a)).catch(a.oe)},f={data:function(){return{imgUrl:o.default.imgUrl,open:!0,txSuc:!1,txAttention:!1,bddAni:"",coinAni:"",moneyAni:"",bizcode:0,haveTel:this.$Store.state.haveTel,txMoney:0,reply:getApp().globalData.reply,needTx:!1,sharePath:"",shareImg:"https://xcxsite.vjifen.com/v/static/qp2020/share.png",authAgain:!1,gzhName:this.$Store.state.gzhName,isEcjx:1==getApp().globalData.reply.doubleSurpriseFlag,isLx:!1,showLadder:1==getApp().globalData.reply.scanLadderFlag,ladderIndex:getApp().globalData.reply.scanLadderNum?Number(getApp().globalData.reply.scanLadderNum):0,provinceCode:getApp().globalData.provinceCode,showActive:!1,showEgg:!1,canOpenCash:!1,taoMemberOrderFlag:1==getApp().globalData.reply.taoMemberOrderFlag}},onLoad:function(e){this.bizcode=e.bizcode,this.sharePath="pages/result/getcash?bizcode=".concat(this.bizcode,"&provinceCode=").concat(getApp().globalData.provinceCode)},onShow:function(){var e=this;this.needTx&&(this.needTx=!1,this.giveSpack()),this.reply.prizeType&&-1!=this.reply.prizeType.indexOf("LX")&&(this.isLx=!0),this.reply.dayScanNum<4&&0==this.bizcode&&Date.parse(new Date)>Date.parse(new Date(2020,4,25))&&Date.parse(new Date)<Date.parse(new Date(2020,5,21))?setTimeout((function(){e.showActive=!0,e.canOpenCash=!0}),1e3):(this.canOpenCash=!0,this.showActive=!1),this.reply.taoEasterEgg&&11==this.bizcode&&setTimeout((function(){e.showEgg=!0}),1e3)},onReady:function(){var t=e.createAnimation({duration:1e3,delay:0,timingFunction:"linear",transformOrigin:"top right"});t.right("160rpx").top("230rpx").scale(2).step().right("-50rpx").top("260rpx").scale(3).step({duration:500}),this.bddAni=t.export()},onHide:function(){},onUnload:function(){},methods:{closeActive:function(){this.showActive=!1},closeEgg:function(){this.showEgg=!1},copy:function(){var t=this;e.setClipboardData({data:this.reply.taoEasterEgg,complete:function(e){t.showEgg=!1}})},toSend:function(){e.navigateTo({url:"../tool/webview?type=send"})},closeAttention:function(){this.txAttention=!1},closeTx:function(){this.txSuc=!1},closeAuth:function(){this.authAgain=!1},openCash:function(){if(!this.canOpenCash)return!1;"U"!=getApp().globalData.provinceCode||getApp().globalData.isFromStrcode?this.openAni():this.sweep(),getApp().globalData.isFromStrcode=!1},openAni:function(){var t=this,a=e.createAnimation({transformOrigin:"top right",duration:500,timingFunction:"linear"});this.bddAni=a.export(),a.right("-705rpx").top("500rpx").scale(3).step(),this.bddAni=a.export();var n=e.createAnimation({duration:300,transformOrigin:"top center",timingFunction:"linear"});n.scale(1.2).step();var o=e.createAnimation({duration:100,delay:200});o.opacity(1).step(),setTimeout((function(){t.open=!1,t.coinAni=n.export(),t.moneyAni=o.export()}),500),0==this.bizcode&&this.reply.taoEasterEgg&&setTimeout((function(){t.showEgg=!0}),1500)},getPhoneNum:function(t){var a=this;if(-1==t.detail.errMsg.indexOf("ok"))return this.authAgain=!0;getApp().globalData.sessionKey?e.request({url:this.$Store.state.sgUrl+"/api/decrypt",method:"POST",data:{provinceCode:"all",sessionKey:getApp().globalData.sessionKey,encryptedData:t.detail.encryptedData,iv:t.detail.iv}}).then((function(t){console.log(t);var n=l(t,2),o=n[0],i=n[1];i?i.data.data.decryptData.phoneNumber||-1==i.data.data.decryptData.indexOf("error")?(a.authAgain=!1,a.$Store.state.haveTel=i.data.data.decryptData.phoneNumber,a.haveTel=i.data.data.decryptData.phoneNumber,a.giveSpack()):(getApp().globalData.sessionKey="",e.removeStorage({key:"xcxOpenid",success:function(e){console.log(e)}}),e.showToast({icon:"none",title:"获取失败请重试"})):console.log(o)})).catch((function(e){console.log(e)})):this.getOpenid().then((function(n){return getApp().globalData.xcxOpenid=n.openid,getApp().globalData.sessionKey=n.session_key,e.request({url:a.$Store.state.sgUrl+"/api/decrypt",method:"POST",data:{provinceCode:"all",sessionKey:getApp().globalData.sessionKey,encryptedData:t.detail.encryptedData,iv:t.detail.iv}})})).then((function(e){console.log(e);var t=l(e,2),n=t[0],o=t[1];o?(a.$Store.state.haveTel=o.data.data.decryptData.phoneNumber,a.haveTel=o.data.data.decryptData.phoneNumber,a.giveSpack()):console.log(n)})).catch((function(e){console.log(e)}))},getOpenid:function(){var t=this;return s(n.default.mark((function a(){var o;return n.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$Store.dispatch("getXcxOpenid");case 2:return o=a.sent,e.setStorage({key:"xcxOpenid",data:o}),a.abrupt("return",o);case 5:case"end":return a.stop()}}),a)})))()},giveSpack:function(t){var a=this;this.reply.totalAccountMoney>=1?getApp().globalData.hbopenid?this.tx():this.$Store.dispatch("getHbOpenid",t).then((function(n){console.log(n);var o=l(n,2),i=(o[0],o[1]);i?(e.showLoading({title:"加载中"}),getApp().globalData.hbopenid=i.data.hbopenid,a.tx()):(a.needTx=!0,e.navigateTo({url:"../tool/getOpenid/getOpenid?type=hbopenid&appid="+(t||a.$Store.state.payAppid)}))})):this.isEcjx?(getApp().globalData.ecjx=!0,e.switchTab({url:"../index/index"})):(getApp().globalData.ecjx=!1,e.switchTab({url:"../mybag/mybag"}))},toRule:function(){e.navigateTo({url:"../rule/webview?provinceCode="+getApp().globalData.provinceCode})},tx:function(){var t=this;e.showLoading({title:"提现中"}),e.request({url:this.$Store.state.requestUrl+"/gifts/getGiftspack",method:"POST",data:{openid:getApp().globalData.openid,hbopenid:getApp().globalData.hbopenid,phoneNumber:this.$Store.state.haveTel,headimgurl:this.$Store.state.hasUserInfo?this.$Store.state.userInfo.avatarUrl:"",nickname:this.$Store.state.hasUserInfo?this.$Store.state.userInfo.nickName:"",sex:this.$Store.state.hasUserInfo?this.$Store.state.userInfo.gender:"",projectServerName:this.$Store.state.serverName}}).then((function(a){e.hideLoading();var n=l(a,2),o=n[0],i=n[1];console.log("提现",a),i?0==i.data.result.code?0==i.data.result.businessCode?(t.txMoney=i.data.reply.withdrawMoney,t.reply.totalAccountMoney=t.reply.totalAccountMoney-t.txMoney,t.queryAttention()):1==i.data.result.businessCode?e.showModal({title:"提现提示",content:"您的红包金额不足，再喝几瓶攒够1元发红包！",showCancel:!1}):2==i.data.result.businessCode?e.showModal({title:"提现提示",content:"系统开了个小差",showCancel:!1}):3==i.data.result.businessCode?e.showModal({title:"提现提示",content:"根据国家法规对支付服务实名制的要求，请到微信中进行实名认证\n实名认证方法：进入【微信】->【我】->【钱包】->【···】->【支付管理】，即可实名认证。",showCancel:!1}):4==i.data.result.businessCode?e.showModal({title:"提现提示",content:"提现处理中，请稍后查看详细记录",showCancel:!1}):-2==i.data.result.businessCode?e.showModal({title:"提现提示",content:"操作频繁，稍作歇息",showCancel:!1}):-1==i.data.result.businessCode?e.showModal({title:"提现提示",content:"系统升级中，稍后再试",showCancel:!1}):e.showModal({title:"提现接口提示",content:i.data.result.msg?i.data.result.msg:"系统开了个小差，请稍后再试~",showCancel:!1}):e.showModal({title:"提现接口提示",content:"系统开了个小差~",showCancel:!1}):(console.log(o),e.showModal({title:"提现接口提示",content:"系统繁忙",showCancel:!1}))}))},queryAttention:function(){var t=this;e.request({url:this.$Store.state.wxUrl+"/wx3/uinfo2?openid="+getApp().globalData.openid+"&appid="+this.$Store.state.appid,method:"GET",complete:function(a){console.log("关注",a),1==a.data.subscribe?t.isEcjx?(getApp().globalData.txSuc=!0,getApp().globalData.ecjx=!0,e.switchTab({url:"../index/index"})):(getApp().globalData.ecjx=!1,t.txSuc=!0):t.isEcjx?(getApp().globalData.txSuc=!1,getApp().globalData.needAttention=!0,getApp().globalData.ecjx=!0,e.switchTab({url:"../index/index"})):(getApp().globalData.needAttention=!1,getApp().globalData.ecjx=!1,t.txAttention=!0)}})},sweep:function(){var t=this;e.showLoading({title:"加载中",mask:!0}),e.request({url:this.$Store.state.requestUrl+"/sweep/sweepQrcode",method:"POST",data:{openid:getApp().globalData.openid,vjifenOpenid:getApp().globalData.vjfOpenid,paOpenid:"",appletOpenid:getApp().globalData.xcxOpenid,sweepstr:getApp().globalData.qr,longitude:getApp().globalData.longitude?getApp().globalData.longitude:"00",latitude:getApp().globalData.latitude?getApp().globalData.latitude:"00",headimgurl:this.$Store.state.hasUserInfo?this.$Store.state.userInfo.avatarUrl:"",nickname:this.$Store.state.hasUserInfo?this.$Store.state.userInfo.nickName:"",sex:this.$Store.state.hasUserInfo?this.$Store.state.userInfo.gender:"",projectServerName:this.$Store.state.serverName}}).then((function(a){e.hideLoading(),console.log(a);var n=l(a,2),o=(n[0],n[1]);o?0==o.data.result.code?(getApp().globalData.reply=o.data.reply,getApp().globalData.result=o.data.result,getApp().globalData.replyTime=o.data.replyTime,t.isEcjx=1==o.data.reply.doubleSurpriseFlag,t.reply=o.data.reply,t.$Store.state.haveTel=o.data.reply.phonenum,setTimeout((function(){t.showLadder=1==o.data.reply.scanLadderFlag,t.ladderIndex=o.data.reply.scanLadderNum?Number(o.data.reply.scanLadderNum):0}),1e3),t.reply.prizeType&&-1!=t.reply.prizeType.indexOf("LX")&&(t.isLx=!0),t.taoMemberOrderFlag=1==o.data.reply.taoMemberOrderFlag,0==o.data.result.businessCode?t.openAni():11==o.data.result.businessCode?t.bizcode=11:7==o.data.result.businessCode||21==o.data.result.businessCode?e.redirectTo({url:"prize?bizcode="+o.data.result.businessCode}):12==o.data.result.businessCode||13==o.data.result.businessCode?e.redirectTo({url:"getMsg?bizcode="+o.data.result.businessCode}):30==o.data.result.businessCode?e.redirectTo({url:"verification"}):24==o.data.result.businessCode?e.redirectTo({url:"../yylx/yylx"}):e.redirectTo({url:"fail?bizcode="+o.data.result.businessCode})):e.showModal({title:"扫码接口提示",content:"系统开了个小差",showCancel:!1,complete:function(t){t.confirm&&e.switchTab({url:"../index/index"})}}):e.showModal({title:"扫码接口提示",content:"系统繁忙",showCancel:!1,complete:function(t){t.confirm&&e.switchTab({url:"../index/index"})}})}))}},components:{ladder_page:g}};t.default=f}).call(this,a("543d")["default"])}},[["1020","common/runtime","common/vendor"]]]);