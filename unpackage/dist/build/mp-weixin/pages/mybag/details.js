(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/mybag/details"],{"784c":function(e,t,i){"use strict";i.r(t);var s=i("cea9"),r=i.n(s);for(var n in s)"default"!==n&&function(e){i.d(t,e,(function(){return s[e]}))}(n);t["default"]=r.a},"907b":function(e,t,i){"use strict";i.r(t);var s=i("fff4"),r=i("784c");for(var n in r)"default"!==n&&function(e){i.d(t,e,(function(){return r[e]}))}(n);i("a4d8");var a,o=i("f0c5"),l=Object(o["a"])(r["default"],s["b"],s["c"],!1,null,null,null,!1,s["a"],a);t["default"]=l.exports},a4d8:function(e,t,i){"use strict";var s=i("f85f"),r=i.n(s);r.a},cea9:function(e,t,i){"use strict";(function(e){function s(e,t){return l(e)||o(e,t)||n(e,t)||r()}function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(e,t){if(e){if("string"===typeof e)return a(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(i):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,s=new Array(t);i<t;i++)s[i]=e[i];return s}function o(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var i=[],s=!0,r=!1,n=void 0;try{for(var a,o=e[Symbol.iterator]();!(s=(a=o.next()).done);s=!0)if(i.push(a.value),t&&i.length===t)break}catch(l){r=!0,n=l}finally{try{s||null==o["return"]||o["return"]()}finally{if(r)throw n}}return i}}function l(e){if(Array.isArray(e))return e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var d=20,c=function(){i.e("components/back").then(function(){return resolve(i("5dd0"))}.bind(null,i)).catch(i.oe)},u=function(){Promise.all([i.e("common/vendor"),i.e("components/simple-address/simple-address")]).then(function(){return resolve(i("baec"))}.bind(null,i)).catch(i.oe)},h={data:function(){return{tabId:1,imgUrl:getApp().globalData.imgUrl,cityPickerValueDefault:[0,0,0],moneyCurrentPage:1,prizeCurrentPage:1,moneyNext:!0,prizeNext:!0,moneyList:"",prizeList:"",writeMsg:!1,isDisabled:!1,username:"",address:"",tel:"",yzcode:"",template:"",idcard:"",sec:0,stop:!1,index:0,showTip:!1,needIdcard:!1,pickerText:"",safeAreaTop:getApp().globalData.safeAreaTop?getApp().globalData.safeAreaTop+"px":"64rpx"}},onLoad:function(){this.queryAllGiftsList()},methods:{tab:function(e){this.tabId=e,this.moneyList?1!=this.prizeCurrentPage||this.prizeList||this.queryPrizeList():this.queryAllGiftsList()},openAddres:function(){if(this.isDisabled)return!1;this.$refs.simpleAddress.open()},onConfirm:function(e){this.pickerText=e.label},inputYzm:function(e){this.yzcode=e.detail.value},inputName:function(e){this.username=e.detail.value},inputTel:function(e){this.tel=e.detail.value},inputAddress:function(e){this.address=e.detail.value},inputIdcard:function(e){this.idcard=e.detail.value},queryAllGiftsList:function(){var t=this;e.showLoading({title:"加载中"}),e.request({url:this.$Store.state.requestUrl+"/gifts/queryAllGiftsList",method:"POST",data:{openid:getApp().globalData.openid,currentPage:this.moneyCurrentPage,count:d,projectServerName:this.$Store.state.serverName}}).then((function(i){e.hideLoading();var r=s(i,2),n=r[0],a=r[1];a?(a.data.reply&&(!a.data.reply.objList||a.data.reply.objList.length<d)?t.moneyNext=!1:t.moneyNext=!0,1==t.moneyCurrentPage?t.moneyList=a.data.reply.objList:a.data.reply.objList&&a.data.reply.objList.length>0&&(t.moneyList=t.moneyList.concat(a.data.reply.objList))):(console.log(n),e.showModal({title:"扫码记录提示",content:"系统繁忙",showCancel:!1}))})).catch((function(t){e.hideLoading(),console.log(t)}))},queryPrizeList:function(t){var i=this;e.request({url:this.$Store.state.requestUrl+"/gifts/queryPrizeList",method:"POST",data:{openid:getApp().globalData.openid,currentPage:this.currentPage,count:d,projectServerName:this.$Store.state.serverName}}).then((function(t){var r=s(t,2),n=r[0],a=r[1];a?0==a.data.result.code?0==a.data.result.businessCode?(1==i.prizeCurrentPage?i.prizeList=a.data.reply.prizeRecordAry:a.data.reply.prizeRecordAry&&a.data.reply.prizeRecordAry.length>0&&(i.prizeList=i.prizeList.concat(a.data.reply.prizeRecordAry)),!a.data.reply.prizeRecordAry||a.data.reply.prizeRecordAry.length<1?i.prizeNext=!1:a.data.reply.prizeRecordAry.length<d?i.prizeNext=!1:i.prizeNext=!0):1==a.data.result.businessCode?(e.showModal({title:"提示",content:"你还未参与过扫码活动",showCancel:!1}),i.prizeNext=!1):(e.showModal({title:"提示",content:a.data.result.msg?a.data.result.msg:"系统开了个小差~",showCancel:!1}),i.prizeNext=!1):(e.showModal({title:"大奖列表接口提示",content:a.data.result.msg?a.data.result.msg:"系统开了个小差~",showCancel:!1}),i.prizeNext=!1):(console.log(n),e.showModal({title:"大奖列表接口提示",content:"系统繁忙",showCancel:!1}),i.prizeNext=!1)}))},lower:function(){this.moneyNext&&1==this.tabId?(this.moneyCurrentPage++,this.queryAllGiftsList()):this.prizeNext&&2==this.tabId?(this.prizeCurrentPage++,this.queryPrizeList()):e.showToast({title:"没有更多了记录了",icon:"none"})},openInput:function(e){this.writeMsg=!0,this.index=e,1==this.prizeList[e].useStatus?(this.isDisabled=!0,this.tel=this.prizeList[e].phoneNum,this.username=this.prizeList[e].userName,this.address=this.prizeList[e].address.split("-")[3],this.pickerText="".concat(this.prizeList[e].address.split("-")[0],"-").concat(this.prizeList[e].address.split("-")[1],"-").concat(this.prizeList[e].address.split("-")[2])):this.isDisabled=!1},submsg:function(){var t=this;if(this.isDisabled)return this.writeMsg=!1,!1;""==this.username||" "==this.username?e.showModal({title:"提示",content:"请填写正确的姓名哦！~",showCancel:!1}):this.needIdcard&&!this.$Store.dispatch(this.idcard)?e.showModal({title:"提示",content:"请填写正确的身份证号码哦！~",showCancel:!1}):/^[1]{1}[0-9]{10}$/.test(this.tel)?""==this.pickerText?e.showModal({title:"提示",content:"请选择所在地区",showCancel:!1}):""==this.address||" "==this.address?e.showModal({title:"提示",content:"请输入正确的详细地址",showCancel:!1}):/^[0-9]{4}$/.test(this.yzcode)?(e.showLoading({title:"提交中"}),e.setStorage({key:"address",data:getApp().globalData.address}),e.request({url:this.$Store.state.requestUrl+"/user/savePrize",method:"POST",data:{openid:getApp().globalData.openid,address:this.pickerText+"-"+this.address,username:this.username,idcard:"idcard",skukey:this.prizeList[this.index].skukey,phonenum:this.tel,prizeInfoKey:this.prizeList[this.index].infoKey,prizeVcode:this.prizeList[this.index].prizeVcode,projectServerName:this.$Store.state.serverName,captcha:this.yzcode}}).then((function(i){e.hideLoading();var r=s(i,2),n=r[0],a=r[1];a?0==a.data.result.code?0==a.data.result.businessCode?(t.showTip=!0,t.yzcode="",t.writeMsg=!1,t.prizeList="",t.prizeCurrentPage=1,t.prizeNext=!0,t.queryPrizeList()):e.showModal({title:"提示",content:a.data.result.msg?a.data.result.msg:"系统开了个小差",showCancel:!1}):e.showModal({title:"大奖提交提示",content:a.data.result.msg?a.data.result.msg:"系统开了个小差",showCancel:!1}):(console.log(n),e.showModal({title:"大奖提交提示",content:"系统繁忙",showCancel:!1}))}))):e.showModal({title:"提示",content:"请输入验证码",showCancel:!1}):e.showModal({title:"提示",content:"请输入正确的手机号",showCancel:!1})},timeout:function(){var e=this;if(this.sec-=1,this.sec<=0||this.stop)return this.sec=0;setTimeout((function(){e.timeout()}),1e3)},getVerifyCode:function(){var t=this;if(0!=this.sec)return!1;/^1[0-9]{10}$/.test(this.tel)?(e.showLoading({title:"获取验证码",mask:!0}),e.request({url:this.$Store.state.requestUrl+"/user/getCaptcha",method:"POST",data:{phonenum:this.tel,projectServerName:this.$Store.state.serverName}}).then((function(i){e.hideLoading();var r=s(i,2),n=(r[0],r[1]);n?0==n.data.result.code&&0==n.data.result.businessCode?(t.sec=60,t.timeout()):0==n.data.result.code&&2==n.data.result.businessCode?e.showModal({title:"提示",content:"您填写的手机号错误，发送验证码失败！",showCancel:!1}):e.showModal({title:"获取验证码提示",content:"验证码获取失败！请稍后再试并确认手机号是否输入正确",showCancel:!1}):e.showModal({title:"获取验证码提示",content:"系统繁忙",showCancel:!1})}))):e.showModal({title:"提示",content:"请输入正确的手机号",showCancel:!1})}},components:{goBack:c,simpleAddress:u}};t.default=h}).call(this,i("543d")["default"])},dade:function(e,t,i){"use strict";(function(e){i("519c");s(i("66fd"));var t=s(i("907b"));function s(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,i("543d")["createPage"])},f85f:function(e,t,i){},fff4:function(e,t,i){"use strict";var s={simpleAddress:function(){return Promise.all([i.e("common/vendor"),i.e("components/simple-address/simple-address")]).then(i.bind(null,"baec"))}},r=function(){var e=this,t=e.$createElement;e._self._c;e._isMounted||(e.e0=function(t){e.writeMsg=!1},e.e1=function(t){e.showTip=!1})},n=[];i.d(t,"b",(function(){return r})),i.d(t,"c",(function(){return n})),i.d(t,"a",(function(){return s}))}},[["dade","common/runtime","common/vendor"]]]);